from usefull_things import stats
from goofy_user_protection import *
from textwrap import dedent


def gui():

    name = safe_input(
        dedent(
            """
         Давным-давно, когда звёзды ещё шептались с горами, а реки несли в своих водах память древних заклинаний, королевство Эльдария процветало под сенью Драконьего Хребта. 
         Но тьма, дремавшая в глубинах забытых пещер, пробудилась вновь. Легендарный дракон Воргатх вырвался из оков, и его огненное дыхание уже коснулось границ земель, где жили простые люди.
         
         В это смутное время судьба зовёт того, кто осмелится поднять меч не ради славы, а ради спасения мира. Маги ищут избранника, короли — защитника, а дракон — достойного противника...
         
         Имя твоего героя ещё не начертано в летописях. Как оно звучит? 
         """
        )
    )

    type_class = closest_match(
        safe_input(
            dedent(
                """
         Твоё имя прозвучало в ветре — и будто в ответ, небеса разверзлись над древним городом Вейлгартом. Там, где стоял ты, земля дрогнула, а в воздухе заплясали искры неведомой силы. Старейшины Совета Башен уже ждали тебя у врат Храма Трёх Путей.
         
         — Ты пришёл, — произнёс Верховный Хранитель, его голос был подобен шелесту пергамента и грохоту далёких громов. — Но путь героя не один. Тьма Воргатха требует не просто храбрости — она требует выбора.
         
         Он поднял руку, и перед тобой возникли три символа, парящие в воздухе:
         — Посох, извивающийся, как живой, с глазом магии на вершине — путь мага, чьи заклинания могут разрушить стены и призвать стихии.
         — Лук из чёрного тиса, натянутый невидимой силой — путь лучника, чьи стрелы находят цель даже в сердце ночи.
         — Клинок в ножнах из драконьей чешуи, пульсирующий тёплым светом — путь воина, чья сталь и щит станут опорой для всех, кто ещё не сломлен.
         
         — Выбери, — сказал Хранитель. — Ибо от твоего решения зависит, каким оружием ты встретишь дракона… и какой легендой станешь для будущих поколений.
         
         Кем ты пойдёшь в бой: магом, лучником или воином?
         """
            )
        ),
        ["маг", "лучник", "воин"],
    )

    player_stats = safe_input(
        dedent(
            f"""
            Ты сделал выбор — и в тот же миг земля под твоими ногами откликнулась на твою суть. Воздух наполнился новой силой: либо запахом озона и древних рун, либо древесной смолой и ветром с высоких холмов, либо железом и потом закалённых в боях воинов.  

            Старейшины кивнули одобрительно.  
            — Теперь, когда путь избран, пришло время пробудить в тебе то, что скрыто в глубине души. Сила не даруется целиком — она раскрывается через твои решения.  
            
            Перед тобой возникло мерцающее зеркало, отражающее не лицо, а возможности. В нём ты видишь, какие качества могут стать твоим оружием, щитом или крыльями. Но очков для их развития — всего пять. Распредели их мудро: от этого зависит, как ты встретишь первое испытание у врат Драконьего Ущелья.
            {stats(type_class)}
            — Время решать, — прошептал Хранитель. — Где твоя сила? Где твоя слабость? И что ты готов усилить ради победы?
            
            Распредели 5 очков навыков между тремя характеристиками своего класса (Например: 221).
            """
        ),
        int,
    )
    print(player_stats)
    print(
        dedent(
            """
         Твои решения приняты. Каждое вложенное очко зажгло искру в твоей душе — и теперь ты чувствуешь, как сила течёт по жилам, как разум острится, как тело становится живым оружием. Ты прошёл через испытания Вейлгарта: выстоял в бою с тенями в Подземелье Забвения, расшифровал пророчество в Библиотеке Ветров и выследил шпиона культа Воргатха в переулках Туманного Рынка.  
         
         Но всё это было лишь подготовкой.  
         
         Теперь перед тобой — **Драконье Ущелье**.  
         
         Ветер здесь не дует — он ревёт, как раненый зверь. Скалы обуглены, а воздух дрожит от жары, исходящей из глубин. Где-то внизу, среди обломков древних башен и остывших лавовых потоков, спит Воргатх… или притворяется спящим. Его глаза — как расплавленное золото, его чешуя — как панцирь самой тьмы. Он знает, что ты идёшь. Он ждёт.  
         
         Ты стоишь на краю пропасти. За спиной — мир, который надеется на тебя. Перед тобой — легенда, которая либо завершится твоей гибелью… либо рождением новой эпохи.  
         
         Пора спуститься в Ущелье. Пора встретить дракона.
         """
        )
    )

    return name, type_class, player_stats
